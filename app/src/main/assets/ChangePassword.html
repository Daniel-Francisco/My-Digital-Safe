<!DOCTYPE html>
<html>

<head>
    <html lang="en">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    </html>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="./css/style.css">

    <link rel="stylesheet" href="./css/StartupPage.css">

</head>

<body>
<div class="container">

    <!--<div class="container">-->
        <!--<div id="loginForm">-->
            <!--<div id="passwordCreateArea">-->
                <!--<img src="images/logo.png" id="loginLogo"/>-->

                <!--<div id="passwordStrengthTitle" class="displayNone">Password Strength:</div>-->
                <!--<progress id="passwordStrengthBar" value="0" class="displayNone" max="10"></progress>-->
                <!--<div id="userPasswordPrompt"></div>-->

                <!--<div>Please create your password!</div>-->
                <!--<input name="passwordOne" id="passwordOne" value="" class="input" placeholder="New Password"-->
                       <!--type="password">-->
                <!--<input name="passwordTwo" id="passwordTwo" value="" class="input" placeholder="Confirm New Password"-->
                       <!--type="password"><br>-->

                <!--<input id="createPassword" value="Create Password!" class="primaryButton" type="button">-->
                <!--<div id="loader" class="displayNone loader"></div>-->

            <!--</div>-->

        <!--</div>-->
    <!--</div>-->


    <div class="container">
        <div id="loginForm">
            <img src="images/logo.png" id="loginLogo"/>
            <div>Password Strength:</div>
            <progress id="passwordStrengthBar" value="0" max="10"></progress>
            <div id="userPasswordPrompt"></div>

            <input name="currentPassword" id="currentPassword" value="" class="input" placeholder="Password" type="password">
            <input name="passwordOne" id="passwordOne" value="" class="input" placeholder="New Password" type="password">
            <input name="passwordTwo" id="passwordTwo" value="" class="input" placeholder="Confirm New Password" type="password">

            <br>

            <!--<select id="dropDown">-->
            <!--<option value="high">High level security</option>-->
            <!--<option value="medium" selected="selected">Medium level security</option>-->
            <!--<option value="low">Low level security</option>-->
            <!--</select>-->


            <input id="changePassword" value="Change Password!" class="primaryButton" type="button">

            <div id="loader" class="displayNone loader"></div>


        </div>
    </div>

</div>




<script>
    $(document).ready(function() {

        $("#changePassword").on("click", function(event) {
            event.preventDefault();

            document.getElementById("loader").classList.remove("displayNone");
            document.getElementById("changePassword").classList.add("displayNone");


            var currentPassword = $("#currentPassword").val().trim();
            var passwordOne = $("#passwordOne").val().trim();
            var passwordTwo = $("#passwordTwo").val().trim();

            console.log("Current: " + currentPassword);
            console.log("New1: " + passwordOne);
            console.log("New2: " + passwordTwo);

            // var dropDownValue = $('#dropDown').val();

            Android.changePassword(currentPassword, passwordOne, passwordTwo);
        });



        $('#passwordOne').on('input', function() {
            console.log("Hello World!");
            var passwordOne = $("#passwordOne").val().trim();
            console.log("Password value: " + passwordOne);
            var strength = Android.checkPasswordStrength(passwordOne);

            if (strength == -1) {
                $("#userPasswordPrompt").innerHTML = "Password must be at least 6 characters!";
            }
            if(strength == -2){
                $("#userPasswordPrompt").innerHTML = "Password is not complicated enough! Try adding upper and lower case values, as well as numbers and symbols!";
            }
            if(strength > 0) {
                $("#userPasswordPrompt").innerHTML = "";
            }


            if(strength < 0){
                strength = 0;
            }


            console.log("Password Strength: " + strength);
            $("#passwordStrengthBar").val(strength);
        });

        $("#currentPassword")[0].addEventListener("keyup", function (event) {
            event.preventDefault();
            if (event.keyCode === 13) {
                $("#changePassword").click();
            }
        });
        $("#passwordOne")[0].addEventListener("keyup", function (event) {
            event.preventDefault();
            if (event.keyCode === 13) {
                $("#changePassword").click();
            }
        });
        $("#passwordTwo")[0].addEventListener("keyup", function (event) {
            event.preventDefault();
            if (event.keyCode === 13) {
                $("#changePassword").click();
            }
        });


    });

    function clearFields(){
        $("#currentPassword").val("");
        $("#passwordOne").val("");
        $("#passwordTwo").val("");

        document.getElementById("loader").classList.add("displayNone");
        document.getElementById("changePassword").classList.remove("displayNone");
    }

</script>

</body>

</html>