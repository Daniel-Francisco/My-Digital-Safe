<!DOCTYPE html>
<html>

<head>
    <html lang="en">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    </html>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="./css/style.css">

    <link rel="stylesheet" href="./css/StartupPage.css">

</head>

<body>
<div class="container">
    <div id="loginForm">
        <div id="passwordCreateArea">
            <img src="images/black_logo.png" id="loginLogo"/>

            <div id="passwordStrengthTitle" class="displayNone">Password Strength:</div>
            <progress id="passwordStrengthBar" value="0" class="displayNone" max="10"></progress>
            <div id="userPasswordPrompt"></div>

            <div>Please create your password!</div>
            <input name="passwordOne" id="passwordOne" value="" class="input" placeholder="New Password"
                   type="password">
            <input name="passwordTwo" id="passwordTwo" value="" class="input" placeholder="Confirm New Password"
                   type="password"><br>

            <input id="createPassword" value="Create Password!" class="primaryButton" type="button">
            <div id="loader" class="displayNone loader"></div>

        </div>

    </div>
</div>


<script>
    var tipShown = false;
    var tips = [
        "Password tip #1: Have you tried including at least one number in your password?",
        "Password tip #2: Have you included a mixture or capitals an lowercase letters in your password?",
        "Password tip #3: Longer passwords are stronger passwords!",
        "Password tip #4: Try to avoid common password, including 'password', 'qwerty' etc.",
        "Password tip #5: It is best to not use obvious words in your passwords, such as names of pets, family and friends."
    ];
    $(document).ready(function () {

        $("#createPassword").on("click", function (event) {
            event.preventDefault();

            document.getElementById("loader").classList.remove("displayNone");
            document.getElementById("createPassword").classList.add("displayNone");

            var passwordOne = $("#passwordOne").val().trim();
            var passwordTwo = $("#passwordTwo").val().trim();
            // var dropDownValue = $('#dropDown').val();

            Android.createPassword(passwordOne, passwordTwo);
        });


        $('#passwordOne').on('input', function () {
            console.log("Hello World!");
            var passwordOne = $("#passwordOne").val().trim();
            console.log("Password value: " + passwordOne);
            var strength = Android.checkPasswordStrength(passwordOne);

            if (strength < 0) {
                strength = 1;
            }
            if(passwordOne.length == 0){
                $("#passwordStrengthBar").addClass("displayNone");
                $("#passwordStrengthTitle").addClass("displayNone");

            }else{
                $("#passwordStrengthBar").removeClass("displayNone");
                $("#passwordStrengthTitle").removeClass("displayNone");
            }

            if(strength < 4){
                $("#passwordStrengthBar").addClass("badPassword");
                $("#passwordStrengthBar").removeClass("mediumPassword");
                $("#passwordStrengthBar").removeClass("goodPassword");
            }else if(3 < strength < 7){
                $("#passwordStrengthBar").removeClass("badPassword");
                $("#passwordStrengthBar").addClass("mediumPassword");
                $("#passwordStrengthBar").removeClass("goodPassword");
            }else{
                $("#passwordStrengthBar").removeClass("badPassword");
                $("#passwordStrengthBar").removeClass("mediumPassword");
                $("#passwordStrengthBar").addClass("goodPassword");
            }


            if(strength != 10 && !tipShown){
                $("#userPasswordPrompt").removeClass("displayNone");
                var random = Math.floor(Math.random() * tips.length);
                console.log("Random: " + random);
                console.log("Tip = " + tips[random]);
                document.getElementById("userPasswordPrompt").innerText = tips[random];
                tipShown = true;
            }else if(strength == 10){
                $("#userPasswordPrompt").addClass("displayNone");
                tipShown = false;
            }


            console.log("class list = " + document.getElementById("passwordStrengthBar").classList);

            console.log("Password Strength: " + strength);
            $("#passwordStrengthBar").val(strength);


        });
    });


    function clearFields() {
        $("#passwordOne").val("");
        $("#passwordTwo").val("");

        document.getElementById("loader").classList.add("displayNone");
        document.getElementById("createPassword").classList.remove("displayNone");
    }


</script>

</body>

</html>